# 博客系统开发文档

## 1. 项目概述

这是一个简单的个人博客系统，具有以下特点：
- 单用户系统（只有一个博主）
- 前后端分离架构
- 前台所有操作无需登录
- 评论功能需要审核
- 支持文章、分类、标签管理
- 支持文件上传功能

## 2. 技术栈

- 后端：Go语言
- 数据库：MySQL
- 前端：Vue.js/React（待定）
- 文件存储：本地存储/云存储（待定）

## 3. 数据库设计

详细数据库设计请参考 [database_design.md](database_design.md) 文件。

优化后的数据库SQL文件位于：[blog_optimized.sql](blog_optimized.sql)

## 4. 功能模块

### 4.1 用户管理模块

由于是单用户博客系统，用户管理模块主要用于博主登录和信息维护：
- 用户登录
- 用户信息修改
- 密码修改

### 4.2 文章管理模块

#### 后端功能：
- 文章创建、编辑、删除
- 文章发布、草稿保存
- 文章置顶设置
- 文章评论开关
- 文章SEO设置
- 文章模板设置

#### 前端功能：
- 文章列表展示
- 文章详情查看
- 文章搜索
- 文章分类筛选
- 文章标签筛选

### 4.3 分类管理模块

#### 后端功能：
- 分类创建、编辑、删除
- 分类层级管理
- 分类SEO设置

#### 前端功能：
- 分类列表展示
- 按分类筛选文章

### 4.4 标签管理模块

#### 后端功能：
- 标签创建、编辑、删除
- 标签颜色设置

#### 前端功能：
- 标签云展示
- 按标签筛选文章

### 4.5 评论管理模块

#### 后端功能：
- 评论审核（通过/拒绝）
- 评论删除
- 评论回复

#### 前端功能：
- 评论提交（无需登录）
- 评论展示
- 评论回复展示

### 4.6 附件管理模块

#### 后端功能：
- 文件上传
- 文件删除
- 文件分组管理

#### 前端功能：
- 文件上传界面
- 已上传文件列表

### 4.7 友情链接管理模块

#### 后端功能：
- 友链创建、编辑、删除

#### 前端功能：
- 友链列表展示

## 5. 接口设计

### 5.1 认证接口

#### 用户登录
- URL: `/api/login`
- 方法: POST
- 参数:
  - account: 账户名
  - password: 密码
- 返回:
  - token: 认证令牌

### 5.2 文章接口

#### 获取文章列表
- URL: `/api/articles`
- 方法: GET
- 参数:
  - page: 页码
  - size: 每页数量
  - category: 分类ID（可选）
  - tag: 标签ID（可选）
  - keyword: 搜索关键词（可选）
- 返回: 文章列表

#### 获取文章详情
- URL: `/api/articles/{id}`
- 方法: GET
- 返回: 文章详细信息

#### 创建文章
- URL: `/api/articles`
- 方法: POST
- 参数: 文章信息
- 返回: 创建结果

#### 更新文章
- URL: `/api/articles/{id}`
- 方法: PUT
- 参数: 文章信息
- 返回: 更新结果

#### 删除文章
- URL: `/api/articles/{id}`
- 方法: DELETE
- 返回: 删除结果

### 5.3 分类接口

#### 获取分类列表
- URL: `/api/categories`
- 方法: GET
- 返回: 分类列表

#### 创建分类
- URL: `/api/categories`
- 方法: POST
- 参数: 分类信息
- 返回: 创建结果

#### 更新分类
- URL: `/api/categories/{id}`
- 方法: PUT
- 参数: 分类信息
- 返回: 更新结果

#### 删除分类
- URL: `/api/categories/{id}`
- 方法: DELETE
- 返回: 删除结果

### 5.4 标签接口

#### 获取标签列表
- URL: `/api/tags`
- 方法: GET
- 返回: 标签列表

#### 创建标签
- URL: `/api/tags`
- 方法: POST
- 参数: 标签信息
- 返回: 创建结果

#### 更新标签
- URL: `/api/tags/{id}`
- 方法: PUT
- 参数: 标签信息
- 返回: 更新结果

#### 删除标签
- URL: `/api/tags/{id}`
- 方法: DELETE
- 返回: 删除结果

### 5.5 评论接口

#### 获取评论列表
- URL: `/api/comments`
- 方法: GET
- 参数:
  - articleId: 文章ID
  - status: 评论状态（0:正常,1:待审核）
- 返回: 评论列表

#### 提交评论
- URL: `/api/comments`
- 方法: POST
- 参数:
  - articleId: 文章ID
  - content: 评论内容
  - userName: 评论人姓名
  - email: 邮箱（可选）
  - website: 网站（可选）
- 返回: 提交结果

#### 审核评论
- URL: `/api/comments/{id}/review`
- 方法: PUT
- 参数:
  - status: 审核状态（0:通过,1:拒绝）
- 返回: 审核结果

#### 删除评论
- URL: `/api/comments/{id}`
- 方法: DELETE
- 返回: 删除结果

### 5.6 附件接口

#### 文件上传
- URL: `/api/attachments`
- 方法: POST
- 参数: 文件
- 返回: 上传结果及文件信息

#### 获取附件列表
- URL: `/api/attachments`
- 方法: GET
- 参数:
  - page: 页码
  - size: 每页数量
- 返回: 附件列表

#### 删除附件
- URL: `/api/attachments/{id}`
- 方法: DELETE
- 返回: 删除结果

### 5.7 友链接口

#### 获取友链列表
- URL: `/api/links`
- 方法: GET
- 返回: 友链列表

#### 创建友链
- URL: `/api/links`
- 方法: POST
- 参数: 友链信息
- 返回: 创建结果

#### 更新友链
- URL: `/api/links/{id}`
- 方法: PUT
- 参数: 友链信息
- 返回: 更新结果

#### 删除友链
- URL: `/api/links/{id}`
- 方法: DELETE
- 返回: 删除结果

## 6. 安全设计

1. **认证安全**：
   - 使用JWT进行用户认证
   - 密码使用加盐哈希存储
   - 关键操作需要重新验证密码

2. **接口安全**：
   - 管理端接口需要认证
   - 前台接口进行频率限制
   - 敏感操作进行权限验证

3. **数据安全**：
   - 对用户输入进行验证和过滤
   - 防止SQL注入
   - 防止XSS攻击

## 7. 部署说明

### 7.1 环境要求
- Go 1.18+
- MySQL 5.7+
- Node.js 14+（前端）

### 7.2 部署步骤

1. 创建数据库并导入SQL文件
2. 配置数据库连接信息
3. 构建后端服务
4. 构建前端页面
5. 启动服务

## 8. 开发规范

### 8.1 代码规范
- 遵循Go语言官方编码规范
- 接口设计遵循RESTful风格
- 错误处理统一规范

### 8.2 提交规范
- 使用Git进行版本控制
- 提交信息遵循规范格式
- 功能开发使用分支管理

## 9. 测试方案

### 9.1 单元测试
- 对核心业务逻辑进行单元测试
- 对数据访问层进行测试

### 9.2 接口测试
- 对所有API接口进行测试
- 验证接口返回数据正确性

### 9.3 集成测试
- 进行完整的业务流程测试
- 验证各模块间协作正常