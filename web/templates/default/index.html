{{define "content"}}
<div class="row">
    <div class="col-lg-8">
        <h1>欢迎来到 Matuto Blog</h1>
        
        {{if .articles}}
            {{range .articles}}
            <div class="card mb-4">
                {{if .Thumbnail}}
                <img src="{{.Thumbnail}}" class="card-img-top" alt="{{.Title}}">
                {{end}}
                <div class="card-body">
                    <h5 class="card-title">
                        {{if .IsTop}}
                        <span class="badge bg-danger me-2">置顶</span>
                        {{end}}
                        <a href="/article/{{.ID}}" class="text-decoration-none">{{.Title}}</a>
                    </h5>
                    {{if .Summary}}
                    <p class="card-text">{{.Summary}}</p>
                    {{end}}
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted">
                            分类: <a href="/category/{{.Category.ID}}">{{.Category.Name}}</a> |
                            发布于: {{.PublishedAt.Format "2006-01-02"}} |
                            阅读: {{.ViewCount}} |
                            评论: {{.CommentCount}}
                        </small>
                        {{if .Tags}}
                        <div>
                            {{range .Tags}}
                            <a href="/tag/{{.ID}}" class="badge bg-primary text-decoration-none me-1">{{.Name}}</a>
                            {{end}}
                        </div>
                        {{end}}
                    </div>
                </div>
            </div>
            {{end}}
        {{else}}
            <div class="alert alert-info">
                <h4>暂无文章</h4>
                <p>还没有发布任何文章，请稍后再来查看。</p>
            </div>
        {{end}}

        {{if .pagination}}
        {{if gt .pagination.pages 1}}
        <nav aria-label="文章分页">
            <ul class="pagination justify-content-center">
                {{if gt .pagination.page 1}}
                <li class="page-item">
                    <a class="page-link" href="?page={{sub .pagination.page 1}}">上一页</a>
                </li>
                {{end}}
                
                {{range $i := .pagination.pages}}
                {{if eq (add $i 1) $.pagination.page}}
                <li class="page-item active">
                    <span class="page-link">{{add $i 1}}</span>
                </li>
                {{else}}
                <li class="page-item">
                    <a class="page-link" href="?page={{add $i 1}}">{{add $i 1}}</a>
                </li>
                {{end}}
                {{end}}

                {{if lt .pagination.page .pagination.pages}}
                <li class="page-item">
                    <a class="page-link" href="?page={{add .pagination.page 1}}">下一页</a>
                </li>
                {{end}}
            </ul>
        </nav>
        {{end}}
        {{end}}
    </div>

    <div class="col-lg-4">
        <!-- 搜索框 -->
        <div class="card mb-4">
            <div class="card-header">搜索</div>
            <div class="card-body">
                <form method="GET" action="/search">
                    <div class="input-group">
                        <input type="text" name="keyword" class="form-control" placeholder="请输入关键词" value="{{.keyword}}">
                        <button class="btn btn-primary" type="submit">搜索</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- 分类 -->
        {{if .categories}}
        <div class="card mb-4">
            <div class="card-header">分类</div>
            <div class="card-body">
                <div class="list-group">
                    {{range .categories}}
                    <a href="/category/{{.ID}}" class="list-group-item list-group-item-action {{if eq $.current_category .ID}}active{{end}}">
                        {{.Name}}
                    </a>
                    {{end}}
                </div>
            </div>
        </div>
        {{end}}

        <!-- 标签云 -->
        {{if .tags}}
        <div class="card mb-4">
            <div class="card-header">标签</div>
            <div class="card-body">
                {{range .tags}}
                <a href="/tag/{{.ID}}" class="badge bg-secondary text-decoration-none me-1 mb-1" style="background-color: {{.Color}} !important;">{{.Name}}</a>
                {{end}}
            </div>
        </div>
        {{end}}
    </div>
</div>
{{end}}